<app-navbar></app-navbar>

<!-- <form style="width: 35%;">
  <input class="form-control me-2" type="search" placeholder="Search for manager, location, description ... " 
  aria-label="Search" name="search" (ngModelChange)="search(key.value)" #key="ngModel" ngModel/>

</form> -->

<div style="padding: 1%; display: flex; justify-content: center;">
  <form (ngSubmit)="getAuditsById(key.value)" class="d-flex">
    <input class="form-control" type="search" placeholder="Search Audits by Opportunity Id " 
    aria-label="Search" name="search" #key="ngModel" ngModel/>
    <button type="submit" class="btn btn-success">Search</button>
  </form>
  <button class="btn btn-success" (click)="getAllAudits()">Reset</button>
</div>

<table class="table table-striped table-bordered" *ngIf="audits.length">
    <thead>
        <tr>
          <th scope="col">#</th>
          <th scope="col">User Name</th>
          <th scope="col">User Email</th>
          <th scope="col">Timestamp</th>
          <th scope="col">Action</th>
        </tr>
      </thead>
      <tbody *ngFor="let audit of audits">
          <tr>
              <th scope="row">{{audit.audid}}</th>
              <td>{{audit.user_name}}</td>
              <td>{{audit.user_email}}</td>
              <td>{{audit.timestamp}}</td>
              <td>{{audit.action}}</td>
          </tr>
          <tr>
            <td colspan = "5">
              <details>
                <summary>Audit Details</summary>
                <p>Audit Id: {{audit.audid}}</p>
                <p>User Name: {{audit.user_name}}</p>
                <p>User Email: {{audit.user_email}}</p>
                <p>Timestamp: {{audit.timestamp}}</p>
                <p>Opportunity Id: {{audit.oppid}}</p>
                <p>Action: {{audit.action}}</p>
                <p>Initially: {{audit.initial}}</p>
                <p>Updated: {{audit.updated}}</p>
              </details>
            </td>
          </tr>
      </tbody>
</table>

<div *ngIf="audits.length === 0" class="col-lg-12 col-md-12 col-xl-12" style="padding-top: 5%;">
    <div class="alert alert-info" role="alert">
      <h4 class="alert-heading">No Audits!</h4>
      <p>No Audit were found.</p>
    </div>
  </div>