<app-navbar></app-navbar>

<!-- <form style="width: 35%;">
  <input class="form-control me-2" type="search" placeholder="Search for manager, location, description ... " 
  aria-label="Search" name="search" (ngModelChange)="search(key.value)" #key="ngModel" ngModel/>

</form> -->

<div class="container">
  <form>
    <div class="form-row" style="align-self: center; margin-top: 5%;">
      <div class="form-group col-md-3">
        <select name="key" id="key" [(ngModel)]="key" class="form-control">
          <option value="" disabled selected>Search Audit by</option>
          <option value="email">User Email</option>
          <option value="id">Id</option>
        </select>
      </div>
      <div class="form-group col-md-7">
        <input type="text" name="value" id="value" [(ngModel)]="value" class="form-control" placeholder="Search Audit by parameter" required/>
      </div>
      <div class="form-group col-md-1">
        <button type="submit" (click) = "onSubmit()" class="btn btn-success">Search</button>
      </div> 
      <div class="form-group col-md-1">
        <button (click) = "resetSearch()" class="btn btn-success">Reset</button>
      </div>
    </div>
  </form>
</div>

<table class="table table-striped table-bordered">
    <thead>
        <tr>
          <th scope="col">#</th>
          <th scope="col">User Name</th>
          <th scope="col">User Email</th>
          <th scope="col">Timestamp</th>
          <th scope="col">Action</th>
        </tr>
      </thead>
      <tbody *ngFor="let audit of audits">
          <tr>
              <th scope="row">{{audit.audid}}</th>
              <td>{{audit.user_name}}</td>
              <td>{{audit.user_email}}</td>
              <td>{{audit.timestamp}}</td>
              <td>{{audit.action}}</td>
          </tr>
          <tr>
            <td colspan = "5">
              <details>
                <summary>Audit Details</summary>
                <p>Audit Id: {{audit.audid}}</p>
                <p>User Name: {{audit.user_name}}</p>
                <p>User Email: {{audit.user_email}}</p>
                <p>Timestamp: {{audit.timestamp}}</p>
                <p>Opportunity Id: {{audit.oppid}}</p>
                <p>Action: {{audit.action}}</p>
                <p>Initially: {{audit.initial}}</p>
                <p>Updated: {{audit.updated}}</p>
              </details>
            </td>
          </tr>
      </tbody>
</table>

<div *ngIf="audits.length === 0" class="col-lg-12 col-md-12 col-xl-12" style="padding-top: 5%;">
    <div class="alert alert-info" role="alert">
      <h4 class="alert-heading">No Audits!</h4>
      <p>No Audit were found.</p>
    </div>
  </div>